(this["webpackJsonpnews-list"]=this["webpackJsonpnews-list"]||[]).push([[0],{17:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(7),l=a.n(r),c=a(1),i=a(2),o=a(5),u=a(4),m=a(3),h=a(8),p=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},this.props.news.map((function(e){return s.a.createElement(d,{key:e.id,author:e.author,title:e.title,description:e.description,url:e.url,image:e.urlToImage,date:e.publishedAt})})))}}]),a}(s.a.Component),d=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=new Date(this.props.date);return s.a.createElement("div",{className:"col s12 m5"},s.a.createElement("div",{className:"card small"},s.a.createElement("div",{className:"card-image"},s.a.createElement("img",{src:this.props.image,alt:this.props.title}),s.a.createElement("span",{className:"card-title"},this.props.title)),s.a.createElement("div",{className:"card-content"},s.a.createElement("p",null,this.props.description)),s.a.createElement("div",{className:"card-action"},s.a.createElement("div",{className:"left"},s.a.createElement("a",{href:this.props.url},"Open")),s.a.createElement("div",{className:"right"},s.a.createElement("span",{style:{marginRight:5}},function(e){var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit",minute:"2-digit",hour:"2-digit"}).formatToParts(e),a=Object(h.a)(t,9),n=a[0].value,s=a[2].value,r=a[4].value,l=a[6].value,c=a[8].value;return"".concat(s,".").concat(n,".").concat(r," ").concat(l,":").concat(c)}(e)),s.a.createElement("span",{style:{marginRight:5,color:"red"}},"|"),s.a.createElement("span",null,this.props.author)))))}}]),a}(s.a.Component);var v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement(p,{news:this.props.data})}}]),a}(s.a.Component);function g(e){return s.a.createElement("div",{className:"input-field col s3"},s.a.createElement("select",{name:e.name,onChange:e.onChange,value:e.values},e.settings.map((function(e){return s.a.createElement("option",{value:e.name,key:e.name},e.text)}))),s.a.createElement("label",null,e.text))}function f(e){return s.a.createElement("div",{className:"input-field "+(e.className||"")},s.a.createElement("input",{id:e.name,name:e.name,value:e.value,onChange:e.onChange,type:"text",className:"validate"}),s.a.createElement("label",{htmlFor:e.name,className:"active"},e.text))}function y(e){return s.a.createElement("p",{className:"range-field"},s.a.createElement("label",null,e.text," (",e.value,")"),s.a.createElement("input",{type:"range",min:e.min,max:e.max,value:e.value,onChange:e.onChange,name:e.name}))}function C(e){return s.a.createElement("div",{className:"input-field col s3"},s.a.createElement("input",{id:e.name,name:e.name,value:e.value,onChange:e.onChange,type:"number",className:"validate"}),s.a.createElement("label",{htmlFor:e.name,className:"active"},e.text))}function b(e){return s.a.createElement("label",{className:"input-field col"},s.a.createElement("input",{name:e.name,checked:e.value,onChange:e.onChange,type:"checkbox"}),s.a.createElement("span",null,e.text))}var E=function(e){return s.a.createElement("div",{className:"input-field col"},s.a.createElement("button",{className:"btn waves-effect waves-light",onClick:e.onClick},e.children))},O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=n.props.defautSettings,n.handleOnChange=n.handleOnChange.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"handleOnChange",value:function(e){var t=this;e.preventDefault();var a=e.target;if("country"===a.name){var n=a.querySelector("option:checked").value;this.setState({selectedCountry:n},(function(){return t.props.onDataChange(t.state)}))}else if("category"===a.name){var s=a.querySelector("option:checked").value;this.setState({selectedCategory:s},(function(){return t.props.onDataChange(t.state)}))}else if("query"===a.name){var r=a.value;this.setState({query:r},(function(){return t.props.onDataChange(t.state)}))}else if("news_count"===a.name)this.setState({newsCount:+e.target.value},(function(){return t.props.onDataChange(t.state)}));else if("page"===a.name){var l=+e.target.value;l>=1&&this.setState({page:l},(function(){return t.props.onDataChange(t.state)}))}}},{key:"componentDidUpdate",value:function(){var e=document.querySelectorAll("select");window.M.FormSelect.init(e),window.M.updateTextFields()}},{key:"render",value:function(){return s.a.createElement("form",null,s.a.createElement("div",{className:"row",style:{marginBottom:0}},s.a.createElement(g,{settings:w,onChange:this.handleOnChange,values:this.state.selectedCounties,name:"country",text:"Country"}),s.a.createElement(g,{settings:j,onChange:this.handleOnChange,values:this.state.selectedCategory,name:"category",text:"Category"}),s.a.createElement(f,{name:"query",text:"Search",className:"col s3",value:this.state.query,onChange:this.handleOnChange})),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col sm1"},s.a.createElement(y,{min:0,max:100,text:"News count",name:"news_count",value:this.state.newsCount,onChange:this.handleOnChange})),s.a.createElement("div",{className:"col sm1"},s.a.createElement(C,{name:"page",text:"Page",value:this.state.page,onChange:this.handleOnChange}))))}}]),a}(s.a.Component),w=[{name:"ua",text:"Ukraine"},{name:"us",text:"United States"},{name:"ru",text:"Russia"},{name:"it",text:"Italy"},{name:"ge",text:"Germany"}],j=[{name:"none",text:"Not Selected"},{name:"business",text:"Busines"},{name:"entertainment",text:"Entertainment"},{name:"general",text:"General"},{name:"health",text:"Health"},{name:"science",text:"Science"},{name:"sports",text:"Sports"},{name:"technology",text:"Technology"}],k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var s=localStorage.getItem("news_list_api_key")||"";return n.state={apiKey:s},n.props.onChange(s),n.handleOnChange=n.handleOnChange.bind(Object(o.a)(n)),n.saveValue=n.saveValue.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"handleOnChange",value:function(e){var t=e.target.value;this.setState({apiKey:t}),this.props.onChange(t)}},{key:"saveValue",value:function(){var e=this.state.apiKey;localStorage.setItem("news_list_api_key",e)}},{key:"componentDidUpdate",value:function(){window.M.updateTextFields()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"input-field col s4"},s.a.createElement(f,{name:"apiKey",value:this.state.apiKey,text:"API Key",onChange:this.handleOnChange})),s.a.createElement("div",{className:"input-field col"},s.a.createElement("a",{href:"https://newsapi.org",target:"_blank",rel:"noopener noreferrer",className:"btn waves-effect waves-light",style:{marginLeft:3}},"Get Token")))}}]),a}(s.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var s="news_list_use_cors",r=localStorage.getItem("news_list_use_cors");return r&&(s="true"===r),n.state={value:s},n.props.onChange(s),n.handleOnChange=n.handleOnChange.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"handleOnChange",value:function(e){var t=e.target.checked;this.setState({value:t}),this.props.onChange(t)}},{key:"saveValue",value:function(){var e=this.state.value;localStorage.setItem("news_list_use_cors",e)}},{key:"render",value:function(){return s.a.createElement(b,{name:"useCors",value:this.state.value,text:"Use CORS",onChange:this.handleOnChange})}}]),a}(s.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={apiKey:"",useCors:!1},n.saveAll=n.saveAll.bind(Object(o.a)(n)),n.inputs=[],n}return Object(i.a)(a,[{key:"updateData",value:function(e,t){var a=this,n={};n[t]=e,this.setState(n,(function(){return a.props.onChange(a.state)}))}},{key:"saveAll",value:function(){this.inputs.filter((function(e){return null!==e&&void 0!==e})).forEach((function(e){return e.saveValue()}))}},{key:"render",value:function(){var e=this;this.inputs=[];var t=function(t){return e.inputs.push(t)};return s.a.createElement("div",{className:"row"},s.a.createElement(k,{onChange:function(t){return e.updateData(t,"apiKey")},ref:t}),s.a.createElement(N,{onChange:function(t){return e.updateData(t,"useCors")},ref:t}),s.a.createElement(E,{onClick:this.saveAll},"Save"))}}]),a}(s.a.Component),S="https://newsapi.org/v2/top-headlines",D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onDataChange=n.onDataChange.bind(Object(o.a)(n)),n.loadNews=n.loadNews.bind(Object(o.a)(n)),n.setSettings=n.setSettings.bind(Object(o.a)(n)),n.defautSettings={selectedCountry:"ua",selectedCategory:"none",query:"",newsCount:20,page:1},n.state={settings:n.defautSettings,news:[],setup:{apiKey:""}},n.lastLetterIndex=0,n}return Object(i.a)(a,[{key:"onDataChange",value:function(e){var t=this;this.setState({settings:e},(function(){return t.loadNews()}))}},{key:"setSettings",value:function(e){var t=this;this.setState({setup:e},(function(){return t.loadNews()}))}},{key:"loadNews",value:function(){var e=this;if(""!==this.state.setup.apiKey){var t=this,a=this.state.setup.apiKey,n=this.state.settings,s=n.newsCount,r=n.selectedCategory,l=n.page,c="none"===r?"":"&category=".concat(r),i=this.state.settings.query,o=""===i?"":"&q=".concat(i),u=S;this.state.setup.useCors&&(u="https://cors-anywhere.herokuapp.com/"+S),fetch("".concat(u,"?country=").concat(this.state.settings.selectedCountry).concat(c).concat(o,"&pageSize=").concat(s,"&page=").concat(l,"&apiKey=").concat(a)).then((function(e){return e.json()})).then((function(a){if("error"!==a.status){var n=a.articles.map((function(t){return t.id=++e.lastLetterIndex,t}));t.setState({news:n})}else alert("Error: "+a.message)}))}}},{key:"componentDidMount",value:function(){this.loadNews()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container",style:{marginLeft:10}},s.a.createElement(x,{onChange:this.setSettings}),s.a.createElement(O,{onDataChange:this.onDataChange,defautSettings:this.defautSettings}),s.a.createElement(v,{data:this.state.news}))}}]),a}(s.a.Component);a(14),a(16);l.a.render(s.a.createElement(D,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.551895c2.chunk.js.map